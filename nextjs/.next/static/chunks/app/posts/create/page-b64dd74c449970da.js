(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[697],{5145:function(e,t,s){Promise.resolve().then(s.bind(s,2487))},2487:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var a=s(7437),n=s(2265),r=s(5806),l=s(4033),i=s(6763),u=s(1396),c=s.n(u);function o(){let{user:e}=(0,r.useAuth)(),t=(0,l.useRouter)(),[s,u]=(0,n.useState)(""),[o,d]=(0,n.useState)(""),[h,m]=(0,n.useState)(!1),[x,b]=(0,n.useState)(""),p=async a=>{if(a.preventDefault(),!e)return;m(!0),b("");let{error:n}=await i.O.from("posts").insert({title:s,content:o,user_id:e.id});n?(b(n.message),m(!1)):t.push("/posts")};return(0,a.jsxs)("div",{className:"min-h-screen bg-base-200",children:[(0,a.jsx)("div",{className:"navbar bg-base-100 shadow-lg",children:(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(c(),{href:"/posts",className:"btn btn-ghost normal-case text-xl",children:"Post Manager"})})}),(0,a.jsx)("div",{className:"container mx-auto p-4 max-w-2xl",children:(0,a.jsx)("div",{className:"card bg-base-100 shadow-xl",children:(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsx)("h2",{className:"card-title text-2xl mb-4",children:"Create New Post"}),x&&(0,a.jsx)("div",{className:"alert alert-error mb-4",children:(0,a.jsx)("span",{children:x})}),(0,a.jsxs)("form",{onSubmit:p,children:[(0,a.jsxs)("div",{className:"form-control mb-4",children:[(0,a.jsx)("label",{className:"label",children:(0,a.jsx)("span",{className:"label-text",children:"Title"})}),(0,a.jsx)("input",{type:"text",placeholder:"Enter post title",className:"input input-bordered",value:s,onChange:e=>u(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"form-control mb-6",children:[(0,a.jsx)("label",{className:"label",children:(0,a.jsx)("span",{className:"label-text",children:"Content"})}),(0,a.jsx)("textarea",{placeholder:"Enter post content",className:"textarea textarea-bordered h-32",value:o,onChange:e=>d(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{type:"submit",className:"btn btn-primary ".concat(h?"loading":""),disabled:h,children:h?"Creating...":"Create Post"}),(0,a.jsx)(c(),{href:"/posts",className:"btn btn-ghost",children:"Cancel"})]})]})]})})})]})}},5806:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthProvider:function(){return u},useAuth:function(){return c}});var a=s(7437),n=s(2265),r=s(6763),l=s(4033);let i=(0,n.createContext)({});function u(e){let{children:t}=e,[s,u]=(0,n.useState)(null),[c,o]=(0,n.useState)(!0),d=(0,l.useRouter)();(0,n.useEffect)(()=>{r.O.auth.getSession().then(e=>{var t;let{data:{session:s}}=e;u(null!==(t=null==s?void 0:s.user)&&void 0!==t?t:null),o(!1)});let{data:{subscription:e}}=r.O.auth.onAuthStateChange((e,t)=>{var s;u(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null)});return()=>e.unsubscribe()},[]);let h=async(e,t)=>{let{error:s}=await r.O.auth.signUp({email:e,password:t});return{error:s}},m=async(e,t)=>{let{error:s}=await r.O.auth.signInWithPassword({email:e,password:t});return{error:s}},x=async()=>{await r.O.auth.signOut(),d.push("/auth/signin")};return(0,a.jsx)(i.Provider,{value:{user:s,loading:c,signUp:h,signIn:m,signOut:x},children:t})}let c=()=>(0,n.useContext)(i)},6763:function(e,t,s){"use strict";s.d(t,{O:function(){return n}});var a=s(5257);let n=(0,a.eI)("https://jsmewescgnvfbevdnuqx.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpzbWV3ZXNjZ252ZmJldmRudXF4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE4NDQxMTksImV4cCI6MjA3NzQyMDExOX0.HFUEr-FR97YIw_eWQab8oJK7ZvtLWXBEuY_RqVTd_1I")},1396:function(e,t,s){e.exports=s(4724)}},function(e){e.O(0,[850,724,971,864,744],function(){return e(e.s=5145)}),_N_E=e.O()}]);