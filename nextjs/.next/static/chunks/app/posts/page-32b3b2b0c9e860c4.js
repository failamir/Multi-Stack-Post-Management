(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[991],{1791:function(e,s,t){Promise.resolve().then(t.bind(t,1097))},1097:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return o}});var n=t(7437),a=t(2265),i=t(5806),l=t(4033),r=t(6763),c=t(1396),d=t.n(c);function o(){let{user:e,loading:s,signOut:t}=(0,i.useAuth)(),c=(0,l.useRouter)(),[o,u]=(0,a.useState)([]),[h,m]=(0,a.useState)(!0),[x,b]=(0,a.useState)(1),[f,j]=(0,a.useState)(1);(0,a.useEffect)(()=>{s||e||c.push("/auth/signin")},[e,s,c]),(0,a.useEffect)(()=>{e&&p()},[e,x]);let p=async()=>{m(!0);let e=(x-1)*10,s=e+10-1,{count:t}=await r.O.from("posts").select("*",{count:"exact",head:!0});t&&j(Math.ceil(t/10));let{data:n,error:a}=await r.O.from("posts").select("*").order("created_at",{ascending:!1}).range(e,s);a?console.error("Error fetching posts:",a):u(n||[]),m(!1)},g=async e=>{if(!confirm("Are you sure you want to delete this post?"))return;let{error:s}=await r.O.from("posts").delete().eq("id",e);s?alert("Error deleting post: "+s.message):p()};return s?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsx)("span",{className:"loading loading-spinner loading-lg"})}):(0,n.jsxs)("div",{className:"min-h-screen bg-base-200",children:[(0,n.jsxs)("div",{className:"navbar bg-base-100 shadow-lg",children:[(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)(d(),{href:"/posts",className:"btn btn-ghost normal-case text-xl",children:"Post Manager"})}),(0,n.jsxs)("div",{className:"flex-none gap-2",children:[(0,n.jsx)(d(),{href:"/posts/create",className:"btn btn-primary",children:"Create Post"}),(0,n.jsx)("button",{onClick:t,className:"btn btn-ghost",children:"Sign Out"})]})]}),(0,n.jsxs)("div",{className:"container mx-auto p-4 max-w-4xl",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"All Posts"}),h?(0,n.jsx)("div",{className:"flex justify-center py-12",children:(0,n.jsx)("span",{className:"loading loading-spinner loading-lg"})}):0===o.length?(0,n.jsx)("div",{className:"alert",children:(0,n.jsx)("span",{children:"No posts yet. Create your first post!"})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"space-y-4",children:o.map(s=>(0,n.jsx)("div",{className:"card bg-base-100 shadow-lg",children:(0,n.jsxs)("div",{className:"card-body",children:[(0,n.jsx)("h2",{className:"card-title",children:s.title}),(0,n.jsx)("p",{className:"text-sm text-base-content/60",children:new Date(s.created_at).toLocaleDateString()}),(0,n.jsx)("p",{className:"line-clamp-2",children:s.content}),(0,n.jsxs)("div",{className:"card-actions justify-end mt-4",children:[(0,n.jsx)(d(),{href:"/posts/".concat(s.id),className:"btn btn-sm btn-info",children:"View"}),(null==e?void 0:e.id)===s.user_id&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d(),{href:"/posts/".concat(s.id,"/edit"),className:"btn btn-sm btn-warning",children:"Edit"}),(0,n.jsx)("button",{onClick:()=>g(s.id),className:"btn btn-sm btn-error",children:"Delete"})]})]})]})},s.id))}),f>1&&(0,n.jsx)("div",{className:"flex justify-center mt-8",children:(0,n.jsxs)("div",{className:"btn-group",children:[(0,n.jsx)("button",{className:"btn",onClick:()=>b(Math.max(1,x-1)),disabled:1===x,children:"\xab"}),(0,n.jsxs)("button",{className:"btn",children:["Page ",x," of ",f]}),(0,n.jsx)("button",{className:"btn",onClick:()=>b(Math.min(f,x+1)),disabled:x===f,children:"\xbb"})]})})]})]})]})}},5806:function(e,s,t){"use strict";t.r(s),t.d(s,{AuthProvider:function(){return c},useAuth:function(){return d}});var n=t(7437),a=t(2265),i=t(6763),l=t(4033);let r=(0,a.createContext)({});function c(e){let{children:s}=e,[t,c]=(0,a.useState)(null),[d,o]=(0,a.useState)(!0),u=(0,l.useRouter)();(0,a.useEffect)(()=>{i.O.auth.getSession().then(e=>{var s;let{data:{session:t}}=e;c(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null),o(!1)});let{data:{subscription:e}}=i.O.auth.onAuthStateChange((e,s)=>{var t;c(null!==(t=null==s?void 0:s.user)&&void 0!==t?t:null)});return()=>e.unsubscribe()},[]);let h=async(e,s)=>{let{error:t}=await i.O.auth.signUp({email:e,password:s});return{error:t}},m=async(e,s)=>{let{error:t}=await i.O.auth.signInWithPassword({email:e,password:s});return{error:t}},x=async()=>{await i.O.auth.signOut(),u.push("/auth/signin")};return(0,n.jsx)(r.Provider,{value:{user:t,loading:d,signUp:h,signIn:m,signOut:x},children:s})}let d=()=>(0,a.useContext)(r)},6763:function(e,s,t){"use strict";t.d(s,{O:function(){return a}});var n=t(5257);let a=(0,n.eI)("https://jsmewescgnvfbevdnuqx.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpzbWV3ZXNjZ252ZmJldmRudXF4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE4NDQxMTksImV4cCI6MjA3NzQyMDExOX0.HFUEr-FR97YIw_eWQab8oJK7ZvtLWXBEuY_RqVTd_1I")},1396:function(e,s,t){e.exports=t(4724)}},function(e){e.O(0,[850,724,971,864,744],function(){return e(e.s=1791)}),_N_E=e.O()}]);